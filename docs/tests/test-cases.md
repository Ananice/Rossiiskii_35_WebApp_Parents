# Test cases — MUIV Portal (Rossiiskii_35_WebApp_Parents)

**Связанные документы:**  
- Протокол прогона 2026-01-03: [test-run-2026-01-03.md](test-run-2026-01-03.md)

## 1. Назначение
Набор тест-кейсов для проверки базового пользовательского сценария.

## 2. Правила фиксации дефектов
Уровни критичности (пример):
- S1 Blocker — полностью блокирует работу/основной сценарий.
- S2 Critical — критично влияет на ключевую функцию, но есть обходной путь.
- S3 Major — значимое отклонение, влияет на удобство/часть функций.
- S4 Minor — малозаметная ошибка, не влияет на основной сценарий.
- S5 Trivial — косметика/текст.

---

## TC-01 Успешный вход (сотрудник)
**PreConditions:**
- Приложение запущено, доступна страница входа `/login/`.
- Есть учётная запись сотрудника (staff1).

**Steps:**
1. Открыть `/login/`.
2. Ввести логин `staff1`.
3. Ввести корректный пароль.
4. Нажать «Войти».

**Expected result:**
- Выполнен вход.
- Происходит редирект на `/dashboard/`.
- Отображается кабинет сотрудника.

---

## TC-02 Успешный вход (родитель)
**PreConditions:**
- Приложение запущено, доступна страница входа `/login/`.
- Есть учётная запись родителя (parent1).

**Steps:**
1. Открыть `/login/`.
2. Ввести логин `parent1`.
3. Ввести корректный пароль.
4. Нажать «Войти».

**Expected result:**
- Выполнен вход.
- Происходит редирект на `/dashboard/`.
- Отображается кабинет родителя.

---

## TC-03 Ошибка входа (неверный пароль)
**PreConditions:**
- Доступна страница входа `/login/`.
- Существует пользователь `staff1`.

**Steps:**
1. Открыть `/login/`.
2. Ввести логин `staff1`.
3. Ввести неверный пароль.
4. Нажать «Войти».

**Expected result:**
- Вход не выполнен.
- Отображается сообщение об ошибке/валидации.
- Пользователь остаётся на странице входа.

---

## TC-04 Доступ без авторизации закрыт
**PreConditions:**
- Пользователь не авторизован (выполнен выход/очищена сессия).

**Steps:**
1. Открыть напрямую `/dashboard/` (или `/messages/`) через адресную строку.

**Expected result:**
- Доступ запрещён.
- Выполняется редирект на `/login/`.

---

## TC-05 Переход в чат
**PreConditions:**
- Пользователь авторизован (роль: родитель или сотрудник).
- Доступно меню/ссылка в чат.

**Steps:**
1. Открыть `/dashboard/`.
2. Нажать пункт «Чат/Сообщения».

**Expected result:**
- Выполнен переход в раздел чата (`/messages/`).
- Отображается список диалогов/контактов.

---

## TC-06 Открытие диалога
**PreConditions:**
- Пользователь авторизован.
- В чате доступен контакт для диалога (например, staff1).

**Steps:**
1. Открыть `/messages/`.
2. Выбрать контакт `staff1` (или нужный контакт).
3. Открыть диалог.

**Expected result:**
- Открывается диалог.
- Отображается история сообщений (если есть).

---

## TC-07 Отправка сообщения
**PreConditions:**
- Пользователь авторизован.
- Открыт диалог с выбранным контактом.

**Steps:**
1. Ввести текст сообщения (например, `Тест 01`).
2. Нажать «Отправить».
3. Обновить страницу (F5).

**Expected result:**
- Сообщение появляется в истории диалога.
- Сообщение сохраняется после обновления страницы.

---

## TC-08 Валидация пустого сообщения
**PreConditions:**
- Пользователь авторизован.
- Открыт диалог.

**Steps:**
1. Оставить поле сообщения пустым (или ввести только пробелы).
2. Нажать «Отправить».

**Expected result:**
- Пустое сообщение не отправляется.
- Появляется предупреждение и/или кнопка неактивна.
- В истории сообщений не создаётся новая запись.

---

## TC-09 Отображение входящих
**PreConditions:**
- Есть два пользователя (например, parent1 и staff1).
- Пользователь A может отправить сообщение пользователю B.

**Steps:**
1. Авторизоваться как `parent1`.
2. Открыть диалог со `staff1`.
3. Отправить сообщение `Тест 02`.
4. Выйти из системы.
5. Авторизоваться как `staff1`.
6. Открыть диалог с `parent1`.

**Expected result:**
- Сообщение `Тест 02` отображается у получателя во входящих/истории диалога.

---

## TC-10 Счётчик непрочитанных
**PreConditions:**
- Пользователь B (получатель) не открывал диалог после отправки.
- Есть функционал счётчика непрочитанных (дашборд/список диалогов).

**Steps:**
1. Авторизоваться как пользователь A и отправить сообщение пользователю B.
2. Авторизоваться как пользователь B.
3. Открыть `/dashboard/` (или список диалогов).

**Expected result:**
- Счётчик непрочитанных для соответствующего диалога > 0 (или увеличился).

---

## TC-11 Сброс непрочитанных после прочтения
**PreConditions:**
- Для диалога есть непрочитанные сообщения (счётчик > 0).

**Steps:**
1. Авторизоваться как получатель.
2. Открыть `/messages/`.
3. Открыть диалог с непрочитанными сообщениями.
4. Вернуться на `/dashboard/` (или обновить список диалогов).

**Expected result:**
- Счётчик непрочитанных уменьшается/становится 0 для прочитанного диалога.

---

## TC-12 Выход из системы
**PreConditions:**
- Пользователь авторизован.

**Steps:**
1. Нажать «Выход».
2. Открыть `/dashboard/` напрямую.

**Expected result:**
- Сессия завершена.
- Редирект на `/login/`.
- При попытке открыть `/dashboard/` происходит редирект на `/login/`.
